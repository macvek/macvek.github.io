<!doctype html>
<html>
<head>
<title>VIM - getting into source code</title>
<link rel="stylesheet" href="styles.css"> 
</head>
<body>
<div id="main">
<div class="intro">
<h3>Writing about good-old-software, how it was built and how it works.</h3>
</div>
<div class="toc">
  <ul>
  <li><a href="index.html"><i>home</i></a></li>
    <li><a href="vim-getting-into-source-code.html">VIM - getting into source code</a> <i>10.11.2025</i></li>
    <li><a href="vim-all-conventions.html">VIM - all conventions</a> <i>10.11.2025</i></li>
  </ul>
</div>

<div class="section">
<div class="heading">
<h1>VIM - getting into source code</h1>
</div>
<h3>Why to get into vim?</h3>
<p>
I have a mixed felling about vim. In my regular work I use neovim. After few weeks I got into all (I guess) relevant keybindings and I can say - it works for me.</p>

<p>
There is a BUT here. The BUT is about how horrible, for me, is extending this editor. The biggest struggles I find, as a software developer, is to 'feel' where to place new stuff if I want to extends something,
and where should it be in the first place, once I want to modify it. With vim/neovim it gives me creeps. I feel lost every time I want to alter any settings.</p>
<p>
My setup is <a href="https://neovim.io/">neovim</a> + <a href="https://nvchad.com/">nvchad</a>, which just works for most cases. While finding configs in cloned plugin repository, I managed to turn on LSP support and it all so so works. BUT still I'm not confident enough to figure how it all works together.</p>

<p>
Experience with Visual Studio Code gave me mixed feelings (mainly due to performance of the editor itself), still it always had this single <i>extensions</i> tab accessible to browse what is installed.
The extension management is really super easy in comparison to what I get for vim. So the goal is to figure out how all these plugins and extensions work and combine together.</p>

<p>
I figured that as it already works for me for 95%, I should get into a source code and try to understand concepts behind how vim/neovim is designed and try to solve the mistery of where stuff should be,
in order to modify it / add something or disable something without breaking the whole setup.</p>

<h3>Setup</h3>
<p>
First things first. To get started into source code, it must be pulled from somewhere. 
Vim is hosted on github: <a href="https://github.com/vim/vim.git">https://github.com/vim/vim.git</a>.

<p>
Before getting into source code, there are:
<ul>
<li><a href="https://www.vim.org">https://www.vim.org</a> - an official vim website </li>
<li><a href="https://vimdoc.sourceforge.net/htmldoc/usr_toc.html">https://vimdoc.sourceforge.net/htmldoc/usr_toc.html</a> - here jump down to 'Tuning Vim' section for vim-script tutorial.</li>
</ul>

</p>

<h3>Building it</h3>
<p>
Vim is using autotools setup, which in a nutshell requires calling 
<span class="code-bash">./configure</span> and <span class="code-bash">make</span>
<p>
The resulting binary lands in <span class="code-path">src/vim</span>. I want to focus on an isolated environment, so the task is to setup it in a way it only search for files in current repository. Therefore just after compilation, I check <span class="code-bash">git status</span>
to make sure <span class="code-path">.gitignore</span> is correctly set and so subsequest changes will track all my experimenting with the code.
<p>
To separate changes, I create a branch 'local' and so I will have all my play tracked.
<p>
Next is to have development environment along source code and to run vim from custom location. There is a special environment variable called VIMINIT.
<p>
VIMINIT is a command which will be executed as a first command during vim boot. I will use it to load commands from my custom folder.
<p>
VIMRUNTIME is another environment variable which I need to tune, 
so vim will use a <i>runtime</i> folder from a source code.
Otherwise it try to load content from <span class="code-path">/usr/local/vim</span>.

<p>
Last step is to create a <span class="code-path">local</span> folder and place there a an empty <span class="code-path">vimrc</span> file.
<p>
My command looks now like this: <span class="code-bash">VIMINIT="source $(pwd)/local/vimrc" VIMRUNTIME=$(pwd)/runtime src/vim</span>. 
I execute from a source code directory. Vim starts with a default prompt.
To test if local file was correctly loaded, I simply insert incorrect command, literally rubish like asd123asd123 and check if it starts with
an error.
<p>
Once I confirmed that both VIMINIT nad VIMRUNTIME are correctly loaded, I pack it all into a <span class="code-path">local/vim</span> script:
<pre class="code-bash">
#!/bin/sh
export VIMINIT="source $(pwd)/local/vimrc"
export VIMRUNTIME="$(pwd)/runtime"
exec $(pwd)/src/vim $@  
</pre>

which from now on will be my script to start vim during development.

<h3>Trying to be first timer again</h3>

<p>
Now as I wanted to have a full recap of what vim offers, I decided to try to behave as a first timer... meaning I followed hints and typed F1 for help.
Experience was strange, as I already knew how to navigate, switch windows etc. Still next few hours I've spent on trying to recap all shortcuts 
and to figure how little piece of functionalities I actually use every day.
<p>
One of the things I totally forgot how to do, was all about macros and handling copy/paste, which I always had replaced with clipboard provider.
<p><b>note:</b> at this point I started writing separate text with 'all vim conventions' to gather all the conventions vim has
<p>

During browsing of a help / tutorial I've found an example vimrc file under <span class="code-path">runtime/vimrc-example.vim</span>. 
I've copied it to my <span class="code-path">local/vimrc</span> and this was my starting point.
<p>
<i>Next opening of vim shows that it is sourced by displaying help with colored text + mouse enabled</i>

<p>



<hr/>
(work in progress)
</div>

</div>
</body>
</html>
